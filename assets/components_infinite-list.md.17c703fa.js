import{_ as s,c as n,o as a,b as l}from"./app.d994eacf.js";const E=JSON.parse('{"title":"\u865A\u62DF\u6EDA\u52A8\u957F\u5217\u8868","description":"","frontmatter":{},"headers":[],"relativePath":"components/infinite-list.md","lastUpdated":null}'),p={name:"components/infinite-list.md"},o=l(`<h1 id="\u865A\u62DF\u6EDA\u52A8\u957F\u5217\u8868" tabindex="-1">\u865A\u62DF\u6EDA\u52A8\u957F\u5217\u8868</h1><h2 id="\u5B9A\u9AD8" tabindex="-1">\u5B9A\u9AD8</h2><div class="language-vue"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#C9D1D9;">&lt;</span><span style="color:#7EE787;">template</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">  &lt;</span><span style="color:#7EE787;">div</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#79C0FF;">class</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;container&quot;</span></span>
<span class="line"><span style="color:#C9D1D9;">    :</span><span style="color:#79C0FF;">style</span><span style="color:#C9D1D9;">=</span><span style="color:#C9D1D9;">&quot;</span><span style="color:#C9D1D9;">{ height: containerHeight }</span><span style="color:#C9D1D9;">&quot;</span></span>
<span class="line"><span style="color:#C9D1D9;">    @</span><span style="color:#79C0FF;">scroll</span><span style="color:#C9D1D9;">=</span><span style="color:#C9D1D9;">&quot;</span><span style="color:#C9D1D9;">handleScroll</span><span style="color:#C9D1D9;">&quot;</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#79C0FF;">ref</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;container&quot;</span></span>
<span class="line"><span style="color:#C9D1D9;">  &gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#8B949E;">&lt;!-- \u6570\u636E\u5217\u8868 --&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">    &lt;</span><span style="color:#7EE787;">div</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">class</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;list&quot;</span><span style="color:#C9D1D9;"> :</span><span style="color:#79C0FF;">style</span><span style="color:#C9D1D9;">=</span><span style="color:#C9D1D9;">&quot;</span><span style="color:#C9D1D9;">{ top: listTop }</span><span style="color:#C9D1D9;">&quot;</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">      </span><span style="color:#8B949E;">&lt;!-- \u5217\u8868\u9879 --&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">      &lt;</span><span style="color:#7EE787;">div</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#79C0FF;">v-for</span><span style="color:#C9D1D9;">=</span><span style="color:#C9D1D9;">&quot;</span><span style="color:#C9D1D9;">item </span><span style="color:#FF7B72;">in</span><span style="color:#C9D1D9;"> showData</span><span style="color:#C9D1D9;">&quot;</span></span>
<span class="line"><span style="color:#C9D1D9;">        :</span><span style="color:#79C0FF;">key</span><span style="color:#C9D1D9;">=</span><span style="color:#C9D1D9;">&quot;</span><span style="color:#C9D1D9;">item.id</span><span style="color:#C9D1D9;">&quot;</span></span>
<span class="line"><span style="color:#C9D1D9;">        :</span><span style="color:#79C0FF;">style</span><span style="color:#C9D1D9;">=</span><span style="color:#C9D1D9;">&quot;</span><span style="color:#C9D1D9;">{ height: size </span><span style="color:#FF7B72;">+</span><span style="color:#C9D1D9;"> </span><span style="color:#A5D6FF;">&#39;px&#39;</span><span style="color:#C9D1D9;"> }</span><span style="color:#C9D1D9;">&quot;</span></span>
<span class="line"><span style="color:#C9D1D9;">      &gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">        &lt;</span><span style="color:#7EE787;">slot</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">name</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;item&quot;</span><span style="color:#C9D1D9;"> :</span><span style="color:#79C0FF;">item</span><span style="color:#C9D1D9;">=</span><span style="color:#C9D1D9;">&quot;</span><span style="color:#C9D1D9;">item</span><span style="color:#C9D1D9;">&quot;</span><span style="color:#C9D1D9;">&gt;&lt;/</span><span style="color:#7EE787;">slot</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">      &lt;/</span><span style="color:#7EE787;">div</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C9D1D9;">      </span><span style="color:#8B949E;">&lt;!-- \u7528\u4E8E\u6491\u5F00\u9AD8\u5EA6\u7684\u5143\u7D20 --&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">      &lt;</span><span style="color:#7EE787;">div</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">class</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;bar&quot;</span><span style="color:#C9D1D9;"> :</span><span style="color:#79C0FF;">style</span><span style="color:#C9D1D9;">=</span><span style="color:#C9D1D9;">&quot;</span><span style="color:#C9D1D9;">{ height: barHeight }</span><span style="color:#C9D1D9;">&quot;</span><span style="color:#C9D1D9;"> /&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">    &lt;/</span><span style="color:#7EE787;">div</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">  &lt;/</span><span style="color:#7EE787;">div</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">&lt;/</span><span style="color:#7EE787;">template</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C9D1D9;">&lt;</span><span style="color:#7EE787;">script</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">setup</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#FF7B72;">import</span><span style="color:#C9D1D9;"> { ref, toRefs, computed } </span><span style="color:#FF7B72;">from</span><span style="color:#C9D1D9;"> </span><span style="color:#A5D6FF;">&#39;vue&#39;</span></span>
<span class="line"><span style="color:#FF7B72;">const</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">props</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">defineProps</span><span style="color:#C9D1D9;">({</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#8B949E;">// \u8981\u6E32\u67D3\u7684\u6570\u636E</span></span>
<span class="line"><span style="color:#C9D1D9;">  items: {</span></span>
<span class="line"><span style="color:#C9D1D9;">    type: Array,</span></span>
<span class="line"><span style="color:#C9D1D9;">    required: </span><span style="color:#79C0FF;">true</span><span style="color:#C9D1D9;">,</span></span>
<span class="line"><span style="color:#C9D1D9;">  },</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#8B949E;">// \u6BCF\u6761\u6570\u636E\u6E32\u67D3\u7684\u8282\u70B9\u7684\u9AD8\u5EA6</span></span>
<span class="line"><span style="color:#C9D1D9;">  size: {</span></span>
<span class="line"><span style="color:#C9D1D9;">    type: Number,</span></span>
<span class="line"><span style="color:#C9D1D9;">    required: </span><span style="color:#79C0FF;">true</span><span style="color:#C9D1D9;">,</span></span>
<span class="line"><span style="color:#C9D1D9;">  },</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#8B949E;">// \u6BCF\u6B21\u6E32\u67D3\u7684 DOM \u8282\u70B9\u4E2A\u6570</span></span>
<span class="line"><span style="color:#C9D1D9;">  shownumber: {</span></span>
<span class="line"><span style="color:#C9D1D9;">    type: Number,</span></span>
<span class="line"><span style="color:#C9D1D9;">    required: </span><span style="color:#79C0FF;">true</span><span style="color:#C9D1D9;">,</span></span>
<span class="line"><span style="color:#C9D1D9;">  },</span></span>
<span class="line"><span style="color:#C9D1D9;">})</span></span>
<span class="line"><span style="color:#8B949E;">// \u4F7F\u7528 toRefs \u5305\u88F9 props\uFF0C\u8BA9\u89E3\u6784\u83B7\u5F97\u7684\u7236\u7EC4\u4EF6\u4F20\u9012\u7684\u53C2\u6570\u53D8\u4E3A\u54CD\u5E94\u5F0F\u7684</span></span>
<span class="line"><span style="color:#FF7B72;">const</span><span style="color:#C9D1D9;"> { </span><span style="color:#79C0FF;">items</span><span style="color:#C9D1D9;">, </span><span style="color:#79C0FF;">size</span><span style="color:#C9D1D9;">, </span><span style="color:#79C0FF;">shownumber</span><span style="color:#C9D1D9;"> } </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">toRefs</span><span style="color:#C9D1D9;">(props)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E;">// ------------------------------------- \u58F0\u660E\u53D8\u91CF ----------------------------------</span></span>
<span class="line"><span style="color:#FF7B72;">const</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">container</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">ref</span><span style="color:#C9D1D9;">(</span><span style="color:#79C0FF;">null</span><span style="color:#C9D1D9;">) </span><span style="color:#8B949E;">// \u9875\u9762 container \u8282\u70B9</span></span>
<span class="line"><span style="color:#FF7B72;">let</span><span style="color:#C9D1D9;"> start </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">ref</span><span style="color:#C9D1D9;">(</span><span style="color:#79C0FF;">0</span><span style="color:#C9D1D9;">) </span><span style="color:#8B949E;">// \u8981\u5C55\u793A\u7684\u6570\u636E\u7684\u8D77\u59CB\u4E0B\u6807</span></span>
<span class="line"><span style="color:#FF7B72;">let</span><span style="color:#C9D1D9;"> end </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">ref</span><span style="color:#C9D1D9;">(shownumber.value) </span><span style="color:#8B949E;">// \u8981\u5C55\u793A\u7684\u6570\u636E\u7684\u7ED3\u675F\u4E0B\u6807</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E;">// ------------------------------------- \u8BA1\u7B97\u5C5E\u6027 ----------------------------------</span></span>
<span class="line"><span style="color:#FF7B72;">const</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">showData</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">computed</span><span style="color:#C9D1D9;">(() </span><span style="color:#FF7B72;">=&gt;</span><span style="color:#C9D1D9;"> items.value.</span><span style="color:#D2A8FF;">slice</span><span style="color:#C9D1D9;">(start.value, end.value)) </span><span style="color:#8B949E;">// \u6700\u7EC8\u7B5B\u9009\u51FA\u7684\u8981\u5C55\u793A\u7684\u6570\u636E</span></span>
<span class="line"><span style="color:#FF7B72;">const</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">containerHeight</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">computed</span><span style="color:#C9D1D9;">(() </span><span style="color:#FF7B72;">=&gt;</span><span style="color:#C9D1D9;"> size.value </span><span style="color:#FF7B72;">*</span><span style="color:#C9D1D9;"> shownumber.value </span><span style="color:#FF7B72;">+</span><span style="color:#C9D1D9;"> </span><span style="color:#A5D6FF;">&#39;px&#39;</span><span style="color:#C9D1D9;">) </span><span style="color:#8B949E;">// \u5BB9\u5668\u7684\u9AD8\u5EA6</span></span>
<span class="line"><span style="color:#FF7B72;">const</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">barHeight</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">computed</span><span style="color:#C9D1D9;">(() </span><span style="color:#FF7B72;">=&gt;</span><span style="color:#C9D1D9;"> size.value </span><span style="color:#FF7B72;">*</span><span style="color:#C9D1D9;"> items.value.</span><span style="color:#79C0FF;">length</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">+</span><span style="color:#C9D1D9;"> </span><span style="color:#A5D6FF;">&#39;px&#39;</span><span style="color:#C9D1D9;">) </span><span style="color:#8B949E;">// \u6491\u5F00\u5BB9\u5668\u5185\u5BB9\u9AD8\u5EA6\u7684\u5143\u7D20\u7684\u9AD8\u5EA6</span></span>
<span class="line"><span style="color:#FF7B72;">const</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">listTop</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">computed</span><span style="color:#C9D1D9;">(() </span><span style="color:#FF7B72;">=&gt;</span><span style="color:#C9D1D9;"> start.value </span><span style="color:#FF7B72;">*</span><span style="color:#C9D1D9;"> size.value </span><span style="color:#FF7B72;">+</span><span style="color:#C9D1D9;"> </span><span style="color:#A5D6FF;">&#39;px&#39;</span><span style="color:#C9D1D9;">) </span><span style="color:#8B949E;">// \u5217\u8868\u5411\u4E0A\u6EDA\u52A8\u65F6\u8981\u52A8\u6001\u6539\u53D8 top \u503C</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E;">// ------------------------------------- \u58F0\u660E\u51FD\u6570 ----------------------------------</span></span>
<span class="line"><span style="color:#8B949E;">// \u5BB9\u5668\u7684\u6EDA\u52A8\u4E8B\u4EF6</span></span>
<span class="line"><span style="color:#FF7B72;">const</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">handleScroll</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> () </span><span style="color:#FF7B72;">=&gt;</span><span style="color:#C9D1D9;"> {</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#8B949E;">// \u83B7\u53D6\u5BB9\u5668\u9876\u90E8\u6EDA\u52A8\u7684\u5C3A\u5BF8</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#FF7B72;">const</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">scrollTop</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> container.value.scrollTop</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#8B949E;">// \u8BA1\u7B97\u5377\u53BB\u7684\u6570\u636E\u6761\u6570\uFF0C\u7528\u8BA1\u7B97\u7684\u7ED3\u679C\u4F5C\u4E3A\u83B7\u53D6\u6570\u636E\u7684\u8D77\u59CB\u548C\u7ED3\u675F\u4E0B\u6807</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#8B949E;">// \u8D77\u59CB\u7684\u4E0B\u6807\u5C31\u662F\u5377\u53BB\u7684\u6570\u636E\u6761\u6570\uFF0C\u5411\u4E0B\u53D6\u6574</span></span>
<span class="line"><span style="color:#C9D1D9;">  start.value </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> Math.</span><span style="color:#D2A8FF;">floor</span><span style="color:#C9D1D9;">(scrollTop </span><span style="color:#FF7B72;">/</span><span style="color:#C9D1D9;"> size.value)</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#8B949E;">// \u7ED3\u675F\u7684\u4E0B\u6807\u5C31\u662F\u8D77\u59CB\u7684\u4E0B\u6807\u52A0\u4E0A\u8981\u5C55\u793A\u7684\u6570\u636E\u6761\u6570</span></span>
<span class="line"><span style="color:#C9D1D9;">  end.value </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> start.value </span><span style="color:#FF7B72;">+</span><span style="color:#C9D1D9;"> shownumber.value</span></span>
<span class="line"><span style="color:#C9D1D9;">}</span></span>
<span class="line"><span style="color:#C9D1D9;">&lt;/</span><span style="color:#7EE787;">script</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C9D1D9;">&lt;</span><span style="color:#7EE787;">style</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">lang</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;less&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">scoped</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#79C0FF;">.container</span><span style="color:#C9D1D9;"> {</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#79C0FF;">position</span><span style="color:#C9D1D9;">: </span><span style="color:#79C0FF;">relative</span><span style="color:#C9D1D9;">;</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#79C0FF;">overflow-y</span><span style="color:#C9D1D9;">: </span><span style="color:#79C0FF;">scroll</span><span style="color:#C9D1D9;">;</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#8B949E;">/* background-color: rgb(150, 195, 238); */</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#79C0FF;">font-size</span><span style="color:#C9D1D9;">: </span><span style="color:#79C0FF;">20</span><span style="color:#FF7B72;">px</span><span style="color:#C9D1D9;">;</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#79C0FF;">font-weight</span><span style="color:#C9D1D9;">: </span><span style="color:#79C0FF;">bold</span><span style="color:#C9D1D9;">;</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#79C0FF;">line-height</span><span style="color:#C9D1D9;">: </span><span style="color:#79C0FF;">60</span><span style="color:#FF7B72;">px</span><span style="color:#C9D1D9;">;</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#79C0FF;">text-align</span><span style="color:#C9D1D9;">: </span><span style="color:#79C0FF;">center</span><span style="color:#C9D1D9;">;</span></span>
<span class="line"><span style="color:#C9D1D9;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#79C0FF;">.list</span><span style="color:#C9D1D9;"> {</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#79C0FF;">position</span><span style="color:#C9D1D9;">: </span><span style="color:#79C0FF;">absolute</span><span style="color:#C9D1D9;">;</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#79C0FF;">top</span><span style="color:#C9D1D9;">: </span><span style="color:#79C0FF;">0</span><span style="color:#C9D1D9;">;</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#79C0FF;">width</span><span style="color:#C9D1D9;">: </span><span style="color:#79C0FF;">100</span><span style="color:#FF7B72;">%</span><span style="color:#C9D1D9;">;</span></span>
<span class="line"><span style="color:#C9D1D9;">}</span></span>
<span class="line"><span style="color:#C9D1D9;">&lt;/</span><span style="color:#7EE787;">style</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#24292F;">&lt;</span><span style="color:#116329;">template</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">  &lt;</span><span style="color:#116329;">div</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#0550AE;">class</span><span style="color:#24292F;">=</span><span style="color:#0A3069;">&quot;container&quot;</span></span>
<span class="line"><span style="color:#24292F;">    :</span><span style="color:#0550AE;">style</span><span style="color:#24292F;">=</span><span style="color:#24292F;">&quot;</span><span style="color:#24292F;">{ height: containerHeight }</span><span style="color:#24292F;">&quot;</span></span>
<span class="line"><span style="color:#24292F;">    @</span><span style="color:#0550AE;">scroll</span><span style="color:#24292F;">=</span><span style="color:#24292F;">&quot;</span><span style="color:#24292F;">handleScroll</span><span style="color:#24292F;">&quot;</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#0550AE;">ref</span><span style="color:#24292F;">=</span><span style="color:#0A3069;">&quot;container&quot;</span></span>
<span class="line"><span style="color:#24292F;">  &gt;</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#6E7781;">&lt;!-- \u6570\u636E\u5217\u8868 --&gt;</span></span>
<span class="line"><span style="color:#24292F;">    &lt;</span><span style="color:#116329;">div</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">class</span><span style="color:#24292F;">=</span><span style="color:#0A3069;">&quot;list&quot;</span><span style="color:#24292F;"> :</span><span style="color:#0550AE;">style</span><span style="color:#24292F;">=</span><span style="color:#24292F;">&quot;</span><span style="color:#24292F;">{ top: listTop }</span><span style="color:#24292F;">&quot;</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">      </span><span style="color:#6E7781;">&lt;!-- \u5217\u8868\u9879 --&gt;</span></span>
<span class="line"><span style="color:#24292F;">      &lt;</span><span style="color:#116329;">div</span></span>
<span class="line"><span style="color:#24292F;">        </span><span style="color:#0550AE;">v-for</span><span style="color:#24292F;">=</span><span style="color:#24292F;">&quot;</span><span style="color:#24292F;">item </span><span style="color:#CF222E;">in</span><span style="color:#24292F;"> showData</span><span style="color:#24292F;">&quot;</span></span>
<span class="line"><span style="color:#24292F;">        :</span><span style="color:#0550AE;">key</span><span style="color:#24292F;">=</span><span style="color:#24292F;">&quot;</span><span style="color:#24292F;">item.id</span><span style="color:#24292F;">&quot;</span></span>
<span class="line"><span style="color:#24292F;">        :</span><span style="color:#0550AE;">style</span><span style="color:#24292F;">=</span><span style="color:#24292F;">&quot;</span><span style="color:#24292F;">{ height: size </span><span style="color:#CF222E;">+</span><span style="color:#24292F;"> </span><span style="color:#0A3069;">&#39;px&#39;</span><span style="color:#24292F;"> }</span><span style="color:#24292F;">&quot;</span></span>
<span class="line"><span style="color:#24292F;">      &gt;</span></span>
<span class="line"><span style="color:#24292F;">        &lt;</span><span style="color:#116329;">slot</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">name</span><span style="color:#24292F;">=</span><span style="color:#0A3069;">&quot;item&quot;</span><span style="color:#24292F;"> :</span><span style="color:#0550AE;">item</span><span style="color:#24292F;">=</span><span style="color:#24292F;">&quot;</span><span style="color:#24292F;">item</span><span style="color:#24292F;">&quot;</span><span style="color:#24292F;">&gt;&lt;/</span><span style="color:#116329;">slot</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">      &lt;/</span><span style="color:#116329;">div</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292F;">      </span><span style="color:#6E7781;">&lt;!-- \u7528\u4E8E\u6491\u5F00\u9AD8\u5EA6\u7684\u5143\u7D20 --&gt;</span></span>
<span class="line"><span style="color:#24292F;">      &lt;</span><span style="color:#116329;">div</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">class</span><span style="color:#24292F;">=</span><span style="color:#0A3069;">&quot;bar&quot;</span><span style="color:#24292F;"> :</span><span style="color:#0550AE;">style</span><span style="color:#24292F;">=</span><span style="color:#24292F;">&quot;</span><span style="color:#24292F;">{ height: barHeight }</span><span style="color:#24292F;">&quot;</span><span style="color:#24292F;"> /&gt;</span></span>
<span class="line"><span style="color:#24292F;">    &lt;/</span><span style="color:#116329;">div</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">  &lt;/</span><span style="color:#116329;">div</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#24292F;">&lt;/</span><span style="color:#116329;">template</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292F;">&lt;</span><span style="color:#116329;">script</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">setup</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#CF222E;">import</span><span style="color:#24292F;"> { ref, toRefs, computed } </span><span style="color:#CF222E;">from</span><span style="color:#24292F;"> </span><span style="color:#0A3069;">&#39;vue&#39;</span></span>
<span class="line"><span style="color:#CF222E;">const</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">props</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> </span><span style="color:#8250DF;">defineProps</span><span style="color:#24292F;">({</span></span>
<span class="line"><span style="color:#24292F;">  </span><span style="color:#6E7781;">// \u8981\u6E32\u67D3\u7684\u6570\u636E</span></span>
<span class="line"><span style="color:#24292F;">  items: {</span></span>
<span class="line"><span style="color:#24292F;">    type: Array,</span></span>
<span class="line"><span style="color:#24292F;">    required: </span><span style="color:#0550AE;">true</span><span style="color:#24292F;">,</span></span>
<span class="line"><span style="color:#24292F;">  },</span></span>
<span class="line"><span style="color:#24292F;">  </span><span style="color:#6E7781;">// \u6BCF\u6761\u6570\u636E\u6E32\u67D3\u7684\u8282\u70B9\u7684\u9AD8\u5EA6</span></span>
<span class="line"><span style="color:#24292F;">  size: {</span></span>
<span class="line"><span style="color:#24292F;">    type: Number,</span></span>
<span class="line"><span style="color:#24292F;">    required: </span><span style="color:#0550AE;">true</span><span style="color:#24292F;">,</span></span>
<span class="line"><span style="color:#24292F;">  },</span></span>
<span class="line"><span style="color:#24292F;">  </span><span style="color:#6E7781;">// \u6BCF\u6B21\u6E32\u67D3\u7684 DOM \u8282\u70B9\u4E2A\u6570</span></span>
<span class="line"><span style="color:#24292F;">  shownumber: {</span></span>
<span class="line"><span style="color:#24292F;">    type: Number,</span></span>
<span class="line"><span style="color:#24292F;">    required: </span><span style="color:#0550AE;">true</span><span style="color:#24292F;">,</span></span>
<span class="line"><span style="color:#24292F;">  },</span></span>
<span class="line"><span style="color:#24292F;">})</span></span>
<span class="line"><span style="color:#6E7781;">// \u4F7F\u7528 toRefs \u5305\u88F9 props\uFF0C\u8BA9\u89E3\u6784\u83B7\u5F97\u7684\u7236\u7EC4\u4EF6\u4F20\u9012\u7684\u53C2\u6570\u53D8\u4E3A\u54CD\u5E94\u5F0F\u7684</span></span>
<span class="line"><span style="color:#CF222E;">const</span><span style="color:#24292F;"> { </span><span style="color:#0550AE;">items</span><span style="color:#24292F;">, </span><span style="color:#0550AE;">size</span><span style="color:#24292F;">, </span><span style="color:#0550AE;">shownumber</span><span style="color:#24292F;"> } </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> </span><span style="color:#8250DF;">toRefs</span><span style="color:#24292F;">(props)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6E7781;">// ------------------------------------- \u58F0\u660E\u53D8\u91CF ----------------------------------</span></span>
<span class="line"><span style="color:#CF222E;">const</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">container</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> </span><span style="color:#8250DF;">ref</span><span style="color:#24292F;">(</span><span style="color:#0550AE;">null</span><span style="color:#24292F;">) </span><span style="color:#6E7781;">// \u9875\u9762 container \u8282\u70B9</span></span>
<span class="line"><span style="color:#CF222E;">let</span><span style="color:#24292F;"> start </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> </span><span style="color:#8250DF;">ref</span><span style="color:#24292F;">(</span><span style="color:#0550AE;">0</span><span style="color:#24292F;">) </span><span style="color:#6E7781;">// \u8981\u5C55\u793A\u7684\u6570\u636E\u7684\u8D77\u59CB\u4E0B\u6807</span></span>
<span class="line"><span style="color:#CF222E;">let</span><span style="color:#24292F;"> end </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> </span><span style="color:#8250DF;">ref</span><span style="color:#24292F;">(shownumber.value) </span><span style="color:#6E7781;">// \u8981\u5C55\u793A\u7684\u6570\u636E\u7684\u7ED3\u675F\u4E0B\u6807</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6E7781;">// ------------------------------------- \u8BA1\u7B97\u5C5E\u6027 ----------------------------------</span></span>
<span class="line"><span style="color:#CF222E;">const</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">showData</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> </span><span style="color:#8250DF;">computed</span><span style="color:#24292F;">(() </span><span style="color:#CF222E;">=&gt;</span><span style="color:#24292F;"> items.value.</span><span style="color:#8250DF;">slice</span><span style="color:#24292F;">(start.value, end.value)) </span><span style="color:#6E7781;">// \u6700\u7EC8\u7B5B\u9009\u51FA\u7684\u8981\u5C55\u793A\u7684\u6570\u636E</span></span>
<span class="line"><span style="color:#CF222E;">const</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">containerHeight</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> </span><span style="color:#8250DF;">computed</span><span style="color:#24292F;">(() </span><span style="color:#CF222E;">=&gt;</span><span style="color:#24292F;"> size.value </span><span style="color:#CF222E;">*</span><span style="color:#24292F;"> shownumber.value </span><span style="color:#CF222E;">+</span><span style="color:#24292F;"> </span><span style="color:#0A3069;">&#39;px&#39;</span><span style="color:#24292F;">) </span><span style="color:#6E7781;">// \u5BB9\u5668\u7684\u9AD8\u5EA6</span></span>
<span class="line"><span style="color:#CF222E;">const</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">barHeight</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> </span><span style="color:#8250DF;">computed</span><span style="color:#24292F;">(() </span><span style="color:#CF222E;">=&gt;</span><span style="color:#24292F;"> size.value </span><span style="color:#CF222E;">*</span><span style="color:#24292F;"> items.value.</span><span style="color:#0550AE;">length</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">+</span><span style="color:#24292F;"> </span><span style="color:#0A3069;">&#39;px&#39;</span><span style="color:#24292F;">) </span><span style="color:#6E7781;">// \u6491\u5F00\u5BB9\u5668\u5185\u5BB9\u9AD8\u5EA6\u7684\u5143\u7D20\u7684\u9AD8\u5EA6</span></span>
<span class="line"><span style="color:#CF222E;">const</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">listTop</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> </span><span style="color:#8250DF;">computed</span><span style="color:#24292F;">(() </span><span style="color:#CF222E;">=&gt;</span><span style="color:#24292F;"> start.value </span><span style="color:#CF222E;">*</span><span style="color:#24292F;"> size.value </span><span style="color:#CF222E;">+</span><span style="color:#24292F;"> </span><span style="color:#0A3069;">&#39;px&#39;</span><span style="color:#24292F;">) </span><span style="color:#6E7781;">// \u5217\u8868\u5411\u4E0A\u6EDA\u52A8\u65F6\u8981\u52A8\u6001\u6539\u53D8 top \u503C</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6E7781;">// ------------------------------------- \u58F0\u660E\u51FD\u6570 ----------------------------------</span></span>
<span class="line"><span style="color:#6E7781;">// \u5BB9\u5668\u7684\u6EDA\u52A8\u4E8B\u4EF6</span></span>
<span class="line"><span style="color:#CF222E;">const</span><span style="color:#24292F;"> </span><span style="color:#8250DF;">handleScroll</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> () </span><span style="color:#CF222E;">=&gt;</span><span style="color:#24292F;"> {</span></span>
<span class="line"><span style="color:#24292F;">  </span><span style="color:#6E7781;">// \u83B7\u53D6\u5BB9\u5668\u9876\u90E8\u6EDA\u52A8\u7684\u5C3A\u5BF8</span></span>
<span class="line"><span style="color:#24292F;">  </span><span style="color:#CF222E;">const</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">scrollTop</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> container.value.scrollTop</span></span>
<span class="line"><span style="color:#24292F;">  </span><span style="color:#6E7781;">// \u8BA1\u7B97\u5377\u53BB\u7684\u6570\u636E\u6761\u6570\uFF0C\u7528\u8BA1\u7B97\u7684\u7ED3\u679C\u4F5C\u4E3A\u83B7\u53D6\u6570\u636E\u7684\u8D77\u59CB\u548C\u7ED3\u675F\u4E0B\u6807</span></span>
<span class="line"><span style="color:#24292F;">  </span><span style="color:#6E7781;">// \u8D77\u59CB\u7684\u4E0B\u6807\u5C31\u662F\u5377\u53BB\u7684\u6570\u636E\u6761\u6570\uFF0C\u5411\u4E0B\u53D6\u6574</span></span>
<span class="line"><span style="color:#24292F;">  start.value </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> Math.</span><span style="color:#8250DF;">floor</span><span style="color:#24292F;">(scrollTop </span><span style="color:#CF222E;">/</span><span style="color:#24292F;"> size.value)</span></span>
<span class="line"><span style="color:#24292F;">  </span><span style="color:#6E7781;">// \u7ED3\u675F\u7684\u4E0B\u6807\u5C31\u662F\u8D77\u59CB\u7684\u4E0B\u6807\u52A0\u4E0A\u8981\u5C55\u793A\u7684\u6570\u636E\u6761\u6570</span></span>
<span class="line"><span style="color:#24292F;">  end.value </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> start.value </span><span style="color:#CF222E;">+</span><span style="color:#24292F;"> shownumber.value</span></span>
<span class="line"><span style="color:#24292F;">}</span></span>
<span class="line"><span style="color:#24292F;">&lt;/</span><span style="color:#116329;">script</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292F;">&lt;</span><span style="color:#116329;">style</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">lang</span><span style="color:#24292F;">=</span><span style="color:#0A3069;">&quot;less&quot;</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">scoped</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"><span style="color:#0550AE;">.container</span><span style="color:#24292F;"> {</span></span>
<span class="line"><span style="color:#24292F;">  </span><span style="color:#0550AE;">position</span><span style="color:#24292F;">: </span><span style="color:#0550AE;">relative</span><span style="color:#24292F;">;</span></span>
<span class="line"><span style="color:#24292F;">  </span><span style="color:#0550AE;">overflow-y</span><span style="color:#24292F;">: </span><span style="color:#0550AE;">scroll</span><span style="color:#24292F;">;</span></span>
<span class="line"><span style="color:#24292F;">  </span><span style="color:#6E7781;">/* background-color: rgb(150, 195, 238); */</span></span>
<span class="line"><span style="color:#24292F;">  </span><span style="color:#0550AE;">font-size</span><span style="color:#24292F;">: </span><span style="color:#0550AE;">20</span><span style="color:#CF222E;">px</span><span style="color:#24292F;">;</span></span>
<span class="line"><span style="color:#24292F;">  </span><span style="color:#0550AE;">font-weight</span><span style="color:#24292F;">: </span><span style="color:#0550AE;">bold</span><span style="color:#24292F;">;</span></span>
<span class="line"><span style="color:#24292F;">  </span><span style="color:#0550AE;">line-height</span><span style="color:#24292F;">: </span><span style="color:#0550AE;">60</span><span style="color:#CF222E;">px</span><span style="color:#24292F;">;</span></span>
<span class="line"><span style="color:#24292F;">  </span><span style="color:#0550AE;">text-align</span><span style="color:#24292F;">: </span><span style="color:#0550AE;">center</span><span style="color:#24292F;">;</span></span>
<span class="line"><span style="color:#24292F;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#0550AE;">.list</span><span style="color:#24292F;"> {</span></span>
<span class="line"><span style="color:#24292F;">  </span><span style="color:#0550AE;">position</span><span style="color:#24292F;">: </span><span style="color:#0550AE;">absolute</span><span style="color:#24292F;">;</span></span>
<span class="line"><span style="color:#24292F;">  </span><span style="color:#0550AE;">top</span><span style="color:#24292F;">: </span><span style="color:#0550AE;">0</span><span style="color:#24292F;">;</span></span>
<span class="line"><span style="color:#24292F;">  </span><span style="color:#0550AE;">width</span><span style="color:#24292F;">: </span><span style="color:#0550AE;">100</span><span style="color:#CF222E;">%</span><span style="color:#24292F;">;</span></span>
<span class="line"><span style="color:#24292F;">}</span></span>
<span class="line"><span style="color:#24292F;">&lt;/</span><span style="color:#116329;">style</span><span style="color:#24292F;">&gt;</span></span>
<span class="line"></span></code></pre></div>`,3),e=[o];function t(c,r,y,F,D,i){return a(),n("div",null,e)}const u=s(p,[["render",t]]);export{E as __pageData,u as default};
